<h2>Staff Complaint Dashboard</h2>

<table class="table">
  <thead>
    <tr>
      <th>Complaint ID</th>
      <th>Passenger Name</th>
      <th>Date Submitted</th>
      <th>Category</th>
      <th>Status</th>
      <th>Priority</th>
    </tr>
  </thead>

  <tbody>
    <tr *ngFor="let c of paginatedComplaints" (click)="select(c)">
      <td>{{ c.id }}</td>
      <td>{{ c.customerName }}</td>
      <td>{{ formatDate(c.submittedDate) }}</td>
      <td>{{ c.category }}</td>
      <td>{{ c.status }}</td>
      <td>{{ c.priority }}</td>
    </tr>
  </tbody>
</table>

<!-- PAGINATION (SAME PATTERN AS OTHER PAGES) -->
<div class="pagination" *ngIf="complaints.length">
  <button (click)="prev()">Previous</button>
  <span>Page {{ page }}</span>
  <button (click)="next()">Next</button>
</div>

<!-- DETAIL VIEW -->
<div *ngIf="selected" class="detail">
  <h3>Complaint Details</h3>

  <p><b>Complaint ID:</b> {{ selected.id }}</p>
  <p><b>Passenger Name:</b> {{ selected.customerName }}</p>
  <p><b>Date Submitted:</b> {{ formatDate(selected.submittedDate) }}</p>
  <p><b>Category:</b> {{ selected.category }}</p>
  <p><b>Current Status:</b> {{ selected.status }}</p>
  <p><b>Priority Level:</b> {{ selected.priority }}</p>

  <hr>

  <p><b>Complaint Description:</b></p>
  <p>{{ selected.description }}</p>

  <hr>

  <h4>Update Complaint Status</h4>
  <select (change)="updateStatus(selected.id, $any($event.target).value)">
    <option>In Progress</option>
    <option>Resolved</option>
    <option>Escalated</option>
  </select>

  <h4>Log Action / Resolution Notes</h4>
  <textarea #note placeholder="Steps taken, communication with passenger, internal notes"></textarea>
  <br>
  <button (click)="logAction(selected.id, note.value)">Log Action</button>

  <hr>

  <h4>Action History</h4>
  <ul>
    <li *ngFor="let a of selected?.actions">
      {{ formatDate(a.actionDate) }} — {{ a.actionBy }} — {{ a.notes }}
    </li>
  </ul>
</div>
